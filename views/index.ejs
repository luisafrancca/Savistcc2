<div class="container-fluid d-flex justify-content-center align-items-center" style="min-height: 100vh; background-color: #f5f5f5;">

  <!-- CARD GRANDE DIVIDIDO -->
  <div class="card shadow-sm rounded-4 overflow-hidden" style="width: 80vw; height: 80vh; max-width: 1200px;">

    <div class="row g-0 h-100">

      <div class="col-md-6 d-flex flex-column justify-content-center align-items-center p-5" style="background-color: #fff;">
        <div class="d-flex align-items-center mb-3" style="gap:17px">
          <img src="/assets/logo.png" alt="Logo Savis" style="width: 130px;">
          <h1 class="fw-bold mb-0" style="position: relative; top: 40px;">Savis</h1>
        </div>
        <p class="text-center subtitulo mt-2">
          Sistema de Agendamento de Viagens para Secretaria de Saúde
        </p>
      </div>

      <div class="col-md-6 d-flex justify-content-center align-items-center" style="background-color: #00204c;">
        
        <div class="d-flex justify-content-center align-items-center" style="width: 100%;">
          <div class="card rounded-4 p-5" style="width: 100%; max-width: 400px; background-color: #fff;">
            <form action="/verificarUsuario" method="POST" novalidate>
              <div class="text-center mb-2"></div>
                <div>
                  <input type="radio" id="paciente" name="tipo" value="paciente"
                        style="transform: scale(0.85); margin-right: 3px;"
                        <%= tipoSelecionado === 'paciente' ? 'checked' : '' %>
                        onclick="toggleCampos()" />
                  <label for="paciente" style="font-size: 14px;">Paciente</label>
                  &nbsp;&nbsp;
                  <input type="radio" id="funcionario" name="tipo" value="funcionario"
                        style="transform: scale(0.85); margin-right: 3px;"
                        <%= tipoSelecionado === 'funcionario' ? 'checked' : '' %>
                        onclick="toggleCampos()" />
                  <label for="funcionario" style="font-size: 14px;">Funcionário</label>
                </div>

              <div class="mb-3 mt-4 <%= tipoSelecionado === 'paciente' ? '' : 'd-none' %>" id="campo-cpf">
                <label for="cpf" class="form-label">CPF</label>
                <input 
                  type="text" 
                  id="cpf" 
                  name="cpf" 
                  value="<%= cpf %>"
                  class="form-control <%= erroValidacao || camposVazios ? 'is-invalid' : '' %>" 
                  placeholder="Digite seu CPF"
                />
              </div>

              <div class="mb-3 mt-4 <%= tipoSelecionado === 'funcionario' ? '' : 'd-none' %>" id="campo-matricula">
                <label for="matricula" class="form-label">Matrícula</label>
                <input 
                  type="text" 
                  id="matricula" 
                  name="matricula" 
                  value="<%= matricula %>"
                  class="form-control <%= erroValidacao || camposVazios ? 'is-invalid' : '' %>"
                  placeholder="Digite sua matrícula"
                />
              </div>

              <div class="mb-1">
                <label for="senha" class="form-label">Senha</label>
                <input 
                  type="password" 
                  id="senha" 
                  name="senha" 
                  required 
                  class="form-control <%= erroValidacao || camposVazios ? 'is-invalid' : '' %>" 
                  placeholder="Digite sua senha"
                />
                <% if (erroValidacao) { %>
                  <div class="invalid-feedback">
                    <%= erroValidacao %>
                  </div>
                <% } %>
              </div>

              <div class="d-flex justify-content-between">
                <button type="submit" class="botao-cadastro">Entrar</button>
              </div>

              <div class="texto-criar-conta" id="texto-criar-conta" style="display: <%= tipoSelecionado === 'paciente' ? 'block' : 'none' %>;">
                <a>Ainda não tem uma conta?</a>
                <a href="/auth/cadastro/etapa1" class="criar-conta">Criar conta!</a>
              </div>

              <% if (sucesso) { %>
                <script>
                  alert('Cadastro realizado com sucesso!');
                </script>
              <% } %>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
  // (mantém o mesmo script do seu card)
  function toggleCampos() {
    const pacienteSelecionado = document.getElementById('paciente').checked;
    document.getElementById('campo-cpf').classList.toggle('d-none', !pacienteSelecionado);
    document.getElementById('campo-matricula').classList.toggle('d-none', pacienteSelecionado);
    const textoCriarConta = document.getElementById('texto-criar-conta');
    if (textoCriarConta) textoCriarConta.style.display = pacienteSelecionado ? 'block' : 'none';
  }

  function mascaraCPF(cpfInput) {
    let v = cpfInput.value.replace(/\D/g, '');
    if (v.length > 11) v = v.slice(0, 11);
    v = v.replace(/(\d{3})(\d)/, "$1.$2");
    v = v.replace(/(\d{3})(\d)/, "$1.$2");
    v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
    cpfInput.value = v;
  }

  function mascaraMatricula(matriculaInput) {
    let v = matriculaInput.value.replace(/\D/g, '');
    if (v.length > 4) v = v.slice(0, 4);
    matriculaInput.value = v;
  }

  window.onload = () => {
    toggleCampos();
    const cpfInput = document.getElementById('cpf');
    const matriculaInput = document.getElementById('matricula');
    cpfInput.addEventListener('input', () => mascaraCPF(cpfInput));
    matriculaInput.addEventListener('input', () => mascaraMatricula(matriculaInput));
  };
</script>
